<dom-module id="uq-minimal-header">

  <link rel="import" href="elements.html">
  <style is="custom-style" include="common-styles">

    :host {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      overflow: visible;
      z-index: 9999;
      font-family: var(--font-family);

      @apply(--layout-vertical);

      --global-links-style: {
         text-transform: uppercase;
         font-size: 10.4px;
         color: var(--uq-purple-light) !important;
         font-weight: 500;
       }
    }

    .header-content {
      margin: 0 auto;
      max-width: var(--max-width);
      width: 100%;
    }

    .header-container {
      height: 100px;
      background-color: var(--uq-purple);

      text-decoration: none;
      font-size: 20px;
      line-height: 1;
      letter-spacing: .02em;
      font-weight: 400;
      white-space: nowrap;
    }

    a {
      color: var(--text-color-inverse) !important;
      text-decoration: none;
    }

    .application-title,
    .library-title,
    .uq-title {
      color: var(--text-color-inverse);
      margin: 10px;
    }

    .uq-title {
      min-width: 190px;
      height: 50px;
      background: url("https://static.uq.net.au/v1/logos/corporate/uq-logo-white.svg") no-repeat 0 0;
      background-size: 178px 50px;
      border-right: 1px solid var(--text-color-inverse);
    }

    .uq-title a {
      display: block;
      width: 190px;
      height: 50px;
    }

    .uq-title-text {
      display: none !important;
    }

    .header-container {
      @apply(--layout-vertical);
      @apply(--layout-end-justified);
    }

    .header-content{
      @apply(--layout-flex);
      @apply(--layout-horizontal);
    }

    .header-title {
      @apply(--layout-flex);
      @apply(--layout-horizontal);
      @apply(--layout-center);
    }

    .header-actions {
      @apply(--layout-flex);
      @apply(--layout-vertical);
      @apply(--layout-end-justified);
    }

    uql-global-links {
      @apply(--layout-horizontal);
      @apply(--layout-end-justified);
    }

    .actions {
      @apply(--layout-flex-2);
      @apply(--layout-horizontal);
      @apply(--layout-end-justified);
      @apply(--layout-center);
    }

    @media all and (max-width: 1047px) {
      .header-container {
        height: 66px;
      }

      .uq-title {
        display: none !important;
      }

      uql-global-links {
        display: none !important;
      }

    }

  </style>

  <template>
    <div class="header-container">
      <div class="header-content">
        <div class="header-title">
          <div class="uq-title">
            <a href="http://www.uq.edu.au/" aria-label="link to UQ home page">
              <div class="uq-title-text">UQ</div>
            </a>
          </div>
          <div class="library-title">
            <a href="https://www.library.uq.edu.au/" aria-label="link to UQ Library home page">UQ Library</a>
          </div>
          <div class="application-title">{{applicationTitle}}</div>
        </div>
        <div class="header-actions">
          <uql-global-links></uql-global-links>
          <div class="actions">
            <template is="dom-if" if="{{showSearchButton}}">
              <uql-search-button show-title="{{showButtonsTitle}}"></uql-search-button>
            </template>
            
            <template is="dom-if" if="{{showIAButton}}">
              <uql-ia-button show-title="{{showButtonsTitle}}"></uql-ia-button>
            </template>

            <template is="dom-if" if="{{showAppsButton}}">
              <template is="dom-if" if="{{userLoggedIn}}">
                <uql-apps-button show-title="{{showButtonsTitle}}"></uql-apps-button>
              </template>
            </template>

            <template is="dom-if" if="{{showChatButton}}">
              <uql-chat-button show-title="{{showButtonsTitle}}"
                               button-title="{{chatConfiguration.buttonTitle}}"
                               chat-online-text="{{chatConfiguration.chatOnlineText}}"
                               chat-offline-text="{{chatConfiguration.chatOfflineText}}"
                               offline-url="{{chatConfiguration.offlineUrl}}">
              </uql-chat-button>
            </template>

            <template is="dom-if" if="{{showLoginButton}}">
              <uql-login-button show-title="{{showButtonsTitle}}" is-logged-in="{{userLoggedIn}}"></uql-login-button>
            </template>
          </div>
        </div>
      </div>
    </div>
  </template>

  <script>
    (function() {
      Polymer({
        is: 'uq-minimal-header',

        properties: {
          applicationTitle: {
            type: String,
            notify: true
          },
          chatConfiguration: {
            type: Object,
            value: {
              buttonTitle: "Ask Us",
              chatOnlineText: "Chat with us now!",
              chatOfflineText: "Click here for help.",
              offlineUrl: "http://answers.library.uq.edu.au"
            }
          },
          showButtonsTitle: {
            type: Boolean,
            value: true
          },
          showSearchButton: {
            type: Boolean,
            value: true
          },
          showIAButton: {
            type: Boolean,
            value: false
          },
          showAppsButton: {
            type: Boolean,
            value: true
          },
          showLoginButton: {
            type: Boolean,
            value: true
          },
          showChatButton: {
            type: Boolean,
            value: true
          },
          userLoggedIn: Boolean //set by notification from login button
        },

        ready: function() {
        }

      });
    })();
  </script>

</dom-module>
