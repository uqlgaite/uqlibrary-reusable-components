<dom-module id="uql-sidebar" class="layout vertical">
  <link rel="import" href="../bower_components/polymer/polymer.html">
  <link rel="import" href="../bower_components/neon-animation/animations/slide-from-left-animation.html">
  <link rel="import" href="../bower_components/neon-animation/animations/slide-left-animation.html">
  <link rel="import" href="../bower_components/neon-animation/neon-animation-runner-behavior.html">
  <link rel="import" href="theme/theme.html">
  <link rel="stylesheet" type="text/css" href="../styles/elements-styles.css">
  <link rel="stylesheet" type="text/css" href="theme/theme.css">

  <style is="custom-style">
    :host {
      display: block;
    }

    #main {
      width: 269px;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      background-color: #eee;
      z-index: 1;
    }

    paper-menu.sublist paper-item a {
      padding-left: 1em;
    }
  </style>

  <template is="dom-bind">
    <paper-material elevation="1" id="main" hidden="{{hideMenu}}" class="layout vertical">
      <paper-menu id="main-menu" attr-for-selected="data-route" selected="[[route]]" class="flex">
        <paper-item>
          <a data-route="home" href on-click="onDataRouteClick">
            <span>Home</span>
          </a>
        </paper-item>

        <paper-submenu>
          <paper-item class="menu-trigger">
            Submenu 1 <iron-icon icon="arrow-drop-down"></iron-icon>
          </paper-item>
          <paper-menu class="menu-content sublist">
            <paper-item>
              <a data-route="users" href on-click="onDataRouteClick">
                <span>Users</span>
              </a>
            </paper-item>

            <paper-item>
              <a data-route="contact" href on-click="onDataRouteClick">
                <span>Contact</span>
              </a>
            </paper-item>
          </paper-menu>
        </paper-submenu>

        <paper-submenu>
          <paper-item class="menu-trigger">
            Submenu 2 <iron-icon icon="arrow-drop-down"></iron-icon>
          </paper-item>
          <paper-menu class="menu-content sublist">
            <paper-item>
              <a data-route="users" href on-click="onDataRouteClick">
                <span>Users</span>
              </a>
            </paper-item>

            <paper-item>
              <a data-route="contact" href on-click="onDataRouteClick">
                <span>Contact</span>
              </a>
            </paper-item>
          </paper-menu>
        </paper-submenu>
      </paper-menu>
      <paper-button class="toggle colorful" toggles raised><iron-icon icon="backspace"></iron-icon> Close</paper-button>
    </paper-material>
  </template>

  <script>
    (function () {
      Polymer({
        is: 'uql-sidebar',
        hideMenu: 0,
        behaviors: [Polymer.NeonAnimationRunnerBehavior],
        properties: {
          visible: {
            type: String,
            observer: '_computeVisibility'
          },
          animationConfig: {
            value: function () {
              return {
                'entry' : {
                  name: 'slide-from-left-animation',
                  node: this.$.main
                },
                'exit' : {
                  name: 'slide-left-animation',
                  node: this.$.main
                }
              };
            }
          }
        },
        listeners: {
          'neon-animation-finish' : '_onNeonAnimationFinish'
        },
        _onNeonAnimationFinish: function () {
          this.hideMenu = this.visible === 'true' ? 0 : 1;
        },
        _computeVisibility: function () {
          if (this.visible === 'true') {
            this.hideMenu = 0;
          }
          this.playAnimation(this.visible === 'true' ? 'entry' : 'exit');
        }
      });
    })();
  </script>

</dom-module>
