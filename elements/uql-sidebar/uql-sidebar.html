<dom-module id="uql-sidebar" class="layout vertical">
  <link rel="import" href="../elements.html">

  <link rel="import" href="../theme/theme.html">

  <link rel="import" type="css" href="../theme/theme.css">
  <link rel="import" type="css" href="uql-sidebar.css">

  <template>
    <iron-ajax auto url="{{menuJson}}" handle-as="json" on-response="_handleResponse" verbose="{{debug}}"></iron-ajax>
    <paper-toolbar id="topBar" role="toolbar">
      <paper-button class="toggle flex"><iron-icon icon="menu" alt="Menu"></iron-icon> Menu</paper-button>
      <paper-icon-button href="/" icon="home" alt="home" on-tap="_goLink"></paper-icon-button>
    </paper-toolbar>
    <paper-material elevation="1" id="main" hidden="{{hideMenu}}" class="layout vertical">
      <paper-toolbar class="toggle">
        <div class="title">{{menu.heading}}</div>
      </paper-toolbar>
      <paper-menu id="main-menu" attr-for-selected="data-route" selected="[[route]]" class="flex">
        <template is="dom-repeat" items="{{menu.items}}">
          <!-- load up single menu items without submenus -->
          <template is="dom-if" if="{{!item.items}}">
            <paper-item>
              <template is="dom-if" if="{{item.icon}}">
                <iron-icon icon="{{item.icon}}"></iron-icon>
              </template>
              <template is="dom-if" if="{{item.href}}">
                <a href="{{item.href}}" on-click="onDataRouteClick">
              </template>
              <span>{{item.label}}</span>
              <template is="dom-if" if="{{item.href}}">
                </a>
              </template>
            </paper-item>
          </template>

          <!-- load up menu items with submenus -->
          <template is="dom-if" if="{{item.items}}">
            <paper-submenu>
              <paper-item class="menu-trigger">
                <template is="dom-if" if="{{item.icon}}">
                  <iron-icon icon="{{item.icon}}"></iron-icon>
                </template>
                <template is="dom-if" if="{{item.href}}">
                  <a href="{{item.href}}">
                </template>
                <span>{{item.label}}</span>
                <iron-icon icon="arrow-drop-down"></iron-icon>
                <template is="dom-if" if="{{item.href}}">
                  </a>
                </template>
              </paper-item>
              <paper-menu class="menu-content sublist">
                <template is="dom-repeat" items="{{item.items}}" as="subitem">
                  <paper-item>
                    <template is="dom-if" if="{{subitem.icon}}">
                      <iron-icon icon="{{subitem.icon}}"></iron-icon>
                    </template>
                    <template is="dom-if" if="{{subitem.href}}">
                      <a href="{{subitem.href}}">
                    </template>
                    <span>{{subitem.label}}</span>
                    <template is="dom-if" if="{{subitem.href}}">
                      </a>
                    </template>
                  </paper-item>
                </template>
              </paper-menu>
            </paper-submenu>
          </template>
        </template>
      </paper-menu>
      <paper-button class="toggle">
        <iron-icon icon="backspace"></iron-icon>
        Close
      </paper-button>
    </paper-material>
  </template>
  <script src="uql-sidebar.js"></script>

</dom-module>
